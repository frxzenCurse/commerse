(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{256:function(e,t,n){},258:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(25),a=n.n(c),o=n(124),i=n(23),s=n(260),u=n(34),l=n(261),j=n(158),d=n(7),O=function(e){var t=e.card,n=e.onClick;return Object(d.jsx)("div",{children:Object(d.jsxs)(l.a,{style:{marginTop:10},type:"inner",title:t.title,extra:Object(d.jsx)(j.a,{onClick:function(){n(t.id)},children:"\u0423\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u043a\u043e\u0440\u0437\u0438\u043d\u044b"}),children:[Object(d.jsx)("p",{children:t.text}),Object(d.jsx)("p",{children:t.price})]})})},b=n(63);function h(e){var t=Object(u.b)();return Object(b.b)(e,t)}var p="ADD_CART_ITEM",f="REMOVE_CART_ITEM",m="GET_TOTAL_SUM",g={addItem:function(e){return{type:p,payload:e}},removeItem:function(e){return{type:f,payload:e}},getSum:function(){return{type:m}}},x=s.a.Content,v=function(){var e=Object(u.c)((function(e){return e.cart})),t=e.items,n=e.totalPrice,c=h(g),a=c.removeItem,o=c.getSum;function i(e){a(e),o()}return Object(r.useEffect)((function(){localStorage.setItem("cartItems",JSON.stringify(t))}),[t]),Object(d.jsx)(s.a,{children:Object(d.jsx)(x,{style:{margin:30},children:t.length?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{children:t.map((function(e){return Object(d.jsx)(O,{card:e,onClick:i},e.id)}))}),Object(d.jsx)("h1",{children:n})]}):Object(d.jsx)("h1",{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u043e\u043a\u0430 \u043f\u0443\u0441\u0442\u0430"})})})},y=n(61),I=n(82),S=n(262),C=n(265),E=n(48),w=n.n(E),T=n(80),k="SET_AUTH",A="SET_USER",L="SET_ERROR",P="SET_IS_LOADING",_=n(108),R=n.n(_),U={setUser:function(e){return{type:A,payload:e}},setAuth:function(e){return{type:k,payload:e}},setIsLoading:function(e){return{type:P,payload:e}},setError:function(e){return{type:L,payload:e}},login:function(e,t){return function(){var n=Object(T.a)(w.a.mark((function n(r){return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{r(U.setIsLoading(!0)),setTimeout(Object(T.a)(w.a.mark((function n(){var c,a;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,R.a.get("./users.json");case 2:c=n.sent,(a=c.data.find((function(n){return n.username===e&&n.password===t})))?(localStorage.setItem("auth","true"),localStorage.setItem("username",a.username),r(U.setAuth(!0)),r(U.setUser(a))):r(U.setError("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!"));case 5:case"end":return n.stop()}}),n)}))),1e3)}catch(c){r(U.setError("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"))}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},logout:function(){return function(e){localStorage.removeItem("auth"),localStorage.removeItem("username"),e(U.setAuth(!1)),e(U.setUser({}))}}},D=function(){var e=Object(u.c)((function(e){return e.login})),t=e.error,n=e.isLoading,c=Object(r.useState)(""),a=Object(y.a)(c,2),o=a[0],i=a[1],s=Object(r.useState)(""),l=Object(y.a)(s,2),O=l[0],b=l[1],p=h(U).login;return Object(d.jsx)(I.a,{justify:"center",style:{marginTop:50},children:Object(d.jsxs)(S.a,{onFinish:function(){p(o,O)},children:[t&&Object(d.jsx)("div",{style:{color:"red",marginBottom:10},children:t}),Object(d.jsx)(S.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(d.jsx)(C.a,{value:o,onChange:function(e){return i(e.target.value)}})}),Object(d.jsx)(S.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(d.jsx)(C.a.Password,{value:O,onChange:function(e){return b(e.target.value)}})}),Object(d.jsx)(S.a.Item,{wrapperCol:{offset:8,span:16},children:Object(d.jsx)(j.a,{type:"primary",htmlType:"submit",loading:n,children:"Submit"})})]})})},M=function(){return Object(d.jsx)("div",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430"})},N=n(46),J=function(e){var t=e.value,n=e.onChange;return Object(d.jsx)("div",{style:{marginBottom:40},children:Object(d.jsx)(C.a,{value:t,onChange:function(e){return n(e)},placeholder:"Search"})})},B=function(e){var t=e.card,n=e.onClick,c=Object(r.useState)(!1),a=Object(y.a)(c,2),o=a[0],i=a[1],s=Object(u.c)((function(e){return e.cart})).items;return Object(r.useEffect)((function(){localStorage.setItem("cartItems",JSON.stringify(s))}),[o]),Object(r.useEffect)((function(){s.forEach((function(e){e.id===t.id&&i(!o)}))}),[]),Object(d.jsxs)(l.a,{title:t.title,style:{width:300,margin:10},children:[Object(d.jsx)("p",{children:t.text}),Object(d.jsx)("p",{children:t.price}),Object(d.jsx)(j.a,{type:"primary",onClick:function(){n(t),i(!o)},disabled:o,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]})},G=n(263),q=function(e){var t=e.cards,n=h(g),r=n.addItem,c=n.getSum;function a(e){r(e),c()}return Object(d.jsx)("div",{className:"container",children:t.length?t.map((function(e){return Object(d.jsx)(B,{card:e,onClick:a},e.id)})):Object(d.jsx)(G.a.Title,{style:{marginLeft:10},children:"\u0422\u0430\u043a\u0438\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u043d\u0435\u0442!"})})},z=n(264),F=z.a.Option,H=function(e){var t=e.placeholder,n=e.options,r=e.onChange;return Object(d.jsx)("div",{children:Object(d.jsx)(z.a,{placeholder:t,style:{width:220},onChange:r,children:n.map((function(e){return Object(d.jsx)(F,{value:e.value,children:e.name},e.value)}))})})},V=n(81),K="SET_PRODUCTS",Q="PRODUCTS_ERROR",W="PRODUCTS_LOADING",X={setLoading:function(e){return{type:W,payload:e}},setError:function(e){return{type:Q,payload:e}},setProducts:function(e){return{type:K,payload:e}},fetchProducts:function(){return function(){var e=Object(T.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t(X.setLoading(!0)),setTimeout(Object(T.a)(w.a.mark((function e(){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("./products.json");case 2:n=e.sent,t(X.setProducts(n.data));case 4:case"end":return e.stop()}}),e)}))),400)}catch(n){t(X.setError("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0431\u0448\u0438\u0431\u043a\u0430: ".concat(n)))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Y=s.a.Content,Z="/products",$="/login",ee="/cart",te=[{path:Z,component:function(){var e=Object(r.useState)(""),t=Object(y.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(y.a)(a,2),i=o[0],l=o[1],j=Object(u.c)((function(e){return e.products})),O=j.products,b=j.loading,p=h(X).fetchProducts;Object(r.useEffect)((function(){p()}),[]);var f=function(e,t,n){var c=Object(r.useMemo)((function(){return t?Object(V.a)(e).sort((function(e,n){return e[t].localeCompare(n[t])})):e}),[e,t]);return Object(r.useMemo)((function(){return Object(V.a)(c).filter((function(e){return e.title.includes(n.toLowerCase())}))}),[c,n])}(O,i,n);return Object(d.jsx)(s.a,{style:{margin:40},children:Object(d.jsxs)(Y,{children:[Object(d.jsxs)(I.a,{children:[Object(d.jsx)(N.a,{span:6,children:Object(d.jsx)(H,{placeholder:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430",options:[{value:"title",name:"\u041f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e"},{value:"text",name:"\u041f\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044e"}],onChange:function(e){l(e)}})}),Object(d.jsx)(N.a,{span:18,children:Object(d.jsx)(J,{value:n,onChange:function(e){return c(e.target.value)}})})]}),b?Object(d.jsx)("h1",{children:"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}):Object(d.jsx)(q,{cards:f})]})})}},{path:"/product/:id",component:M},{path:$,component:D},{path:ee,component:v}],ne=function(){return Object(d.jsxs)(i.d,{children:[te.map((function(e){var t=e.path,n=e.component;return Object(d.jsx)(i.b,{path:t,component:n,exact:!0},t)})),Object(d.jsx)(i.a,{to:"/products"})]})},re=n(266),ce=function(){var e=Object(i.g)(),t=Object(u.c)((function(e){return e.login})),n=t.isAuth,r=t.user,c=h(U).logout;return Object(d.jsx)(s.a.Header,{children:Object(d.jsx)(I.a,{justify:"end",children:n?Object(d.jsxs)(re.a,{theme:"dark",mode:"horizontal",children:[Object(d.jsx)(re.a.Item,{onClick:function(){return e.push(Z)},children:"\u0422\u043e\u0432\u0430\u0440\u044b"},"1"),Object(d.jsx)(re.a.Item,{onClick:function(){return e.push($)},children:r.username},"2"),Object(d.jsx)(re.a.Item,{onClick:function(){return c()},children:"\u0412\u044b\u0439\u0442\u0438"},"3"),Object(d.jsx)(re.a.Item,{onClick:function(){return e.push(ee)},children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"},"4")]}):Object(d.jsxs)(re.a,{theme:"dark",mode:"horizontal",children:[Object(d.jsx)(re.a.Item,{onClick:function(){return e.push(Z)},children:"\u0422\u043e\u0432\u0430\u0440\u044b"},"1"),Object(d.jsx)(re.a.Item,{onClick:function(){return e.push($)},children:"\u041b\u043e\u0433\u0438\u043d"},"2"),Object(d.jsx)(re.a.Item,{onClick:function(){return alert("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u043e\u0439\u0434\u0438\u0442\u0435")},children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"},"3")]})})})};var ae=function(){var e=h(U),t=e.setUser,n=e.setAuth,c=h(g),a=c.addItem,i=c.getSum;return Object(r.useEffect)((function(){(localStorage.getItem("auth")&&(t({username:localStorage.getItem("username")}),n(!0)),localStorage.getItem("cartItems"))&&(JSON.parse(localStorage.getItem("cartItems")).forEach((function(e){a(e)})),i())}),[]),Object(d.jsxs)(o.a,{children:[Object(d.jsx)(ce,{}),Object(d.jsx)(ne,{})]})},oe=(n(256),n(155)),ie=n(24),se={items:[],totalPrice:0},ue=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].price;return t},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(ie.a)(Object(ie.a)({},e),{},{items:[].concat(Object(V.a)(e.items),[t.payload])});case m:return Object(ie.a)(Object(ie.a)({},e),{},{totalPrice:ue(e.items)});case f:return Object(ie.a)(Object(ie.a)({},e),{},{items:Object(V.a)(e.items).filter((function(e){return e.id!==t.payload}))});default:return e}},je={isAuth:!1,isLoading:!1,error:"",user:{}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(ie.a)(Object(ie.a)({},e),{},{isAuth:t.payload,isLoading:!1});case A:return Object(ie.a)(Object(ie.a)({},e),{},{user:t.payload});case L:return Object(ie.a)(Object(ie.a)({},e),{},{error:t.payload,isLoading:!1});case P:return Object(ie.a)(Object(ie.a)({},e),{},{isLoading:t.payload});default:return e}},Oe={loading:!1,error:"",products:[]},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return Object(ie.a)(Object(ie.a)({},e),{},{products:t.payload,loading:!1});case Q:return Object(ie.a)(Object(ie.a)({},e),{},{error:t.payload,loading:!1});case W:return Object(ie.a)(Object(ie.a)({},e),{},{loading:t.payload});default:return e}},he=Object(b.c)({login:de,products:be,cart:le}),pe=Object(b.d)(he,Object(b.a)(oe.a));n(257);a.a.render(Object(d.jsx)(u.a,{store:pe,children:Object(d.jsx)(ae,{})}),document.getElementById("root"))}},[[258,1,2]]]);
//# sourceMappingURL=main.ba8409ea.chunk.js.map